function gridGalleryShortcode(){var e=$j(".gridgallery").parent().width(),t=10,i=2,l=5,r=0,a=0,s=0,n=0;$j(".gridgallery").hasClass("five")?l=5:$j(".gridgallery").hasClass("four")?l=4:$j(".gridgallery").hasClass("three")&&(l=3);var o=$j("#gridgallery-setting-height").html(),h=parseInt((e-l*(t+2*i))/l)+parseInt(t/l);$j(".gridgallery .ulHolder").css({background:"none"});var c=1,d=1,p=0;$j(".gridgallery .ulHolder .ourHolder .item").each(function(){p++}),rowCount=Math.ceil(p/l),$j(".gridgallery .ulHolder .ourHolder .item").each(function(){if($j(this).children().length>0){var e,p=$j(this).children(".tile").children(".tileWrap"),g=p.html();"auto"==o?(e=g.replace("w=1","w="+h).replace("h=1","h="+h),p.html('<img src="'+e+'" width="'+h+'" height="'+h+'" alt="tile" />')):(e=g.replace("w=1","w="+h).replace("h=1","h="+parseInt(o)),p.html('<img src="'+e+'" width="'+h+'" height="'+o+'" alt="tile" />')),$j(this).children(".tile").width(h),$j(this).children(".tile").css({display:"block"}),$j(this).children(".tile-desc-wrap").children(".tile-desc").width(h),$j(this).children(".tile-desc-wrap").children(".tile-desc").css({"margin-left":t+i+"px"}),$j(this).children(".tile-desc-wrap").children(".tile-desc").css({"margin-bottom":s+"px"}),$j(this).children().size()>1&&(a=parseInt($j(this).children(".tile-desc-wrap").children(".tile-desc").css("height")),s=10,0==n&&(n=a),$j(this).children(".tile-desc-wrap").height(n),$j(this).children(".tile-desc-wrap").children(".tile-desc").height(n)),"auto"==o?($j(this).children(".tile").height(h),$j(this).children(".tile").parent().height(parseInt(h)+n+s+i+t)):($j(this).children(".tile").height(parseInt(o)),$j(this).children(".tile").parent().height(parseInt(o)+n+s+i+t)),currChildTile=$j(this).children(".tile").children(".gridgallery-icon").children(),$j(".portfolio").hasClass("item-fancybox")||("auto"==o?(parsedWidth=parseInt(2*h+t+2*i),e=g.replace("w=1","w="+parsedWidth).replace("h=1","h="+parseInt(parsedWidth+2*a+2*s)),e=e.replace(/&/g,"&"),currChildTile.css({background:"url('"+e+"') no-repeat center center"})):(e=g.replace("w=1","w="+(2*h+t+4*i)).replace("h=1","h="+(2*parseInt(o)+t+4*i+2*a+2*s)),e=e.replace(/&/g,"&"),currChildTile.css({background:"url('"+e+"') no-repeat center center"}))),currChildTile.width(2*h+t+2*i),currChildTile.height("auto"==o?2*h+t+2*i:2*parseInt(o)+t+2*i+2*a+2*s),1==d?1==c?currChildTile.css("auto"==o?{top:"-"+i+"px",left:"-"+i+"px",bottom:"0px",right:"0px","margin-left":"0px"}:{top:"-"+i+"px",left:"-"+i+"px",bottom:"0px",right:"0px","margin-left":"0px"}):c==l?(currChildTile.css("auto"==o?{left:"-"+(h+t+3*i)+"px",right:"0px",top:"-"+i+"px","margin-left":"0px"}:{left:"-"+(h+t+3*i)+"px",right:"0px",top:"-"+i+"px","margin-left":"0px"}),c=0,d++):currChildTile.css({top:"-"+i+"px",left:"-"+i+"px",bottom:"0px","margin-left":"0px"}):d==rowCount?1==c?currChildTile.css("auto"==o?{top:"-"+(h+t+2*i+a+s)+"px",left:"-"+i+"px",bottom:"0px",bottom:"0px",right:"0px","margin-left":"0px"}:{top:"-"+(parseInt(o)+t+2*i+a+s)+"px",left:"-"+i+"px",bottom:"0px",bottom:"0px",right:"0px","margin-left":"0px"}):c==l?(currChildTile.css("auto"==o?{top:"-"+(h+t+2*i+a+s)+"px",bottom:"0px",left:"-"+(h+t+3*i)+"px",bottom:"0px",right:"0px","margin-left":"0px"}:{top:"-"+(parseInt(o)+t+2*i+a+s)+"px",bottom:"0px",left:"-"+(h+t+3*i)+"px",bottom:"0px",right:"0px","margin-left":"0px"}),c=0,d++):currChildTile.css("auto"==o?{top:"-"+(h+t+2*i+a+s)+"px",left:"-"+i+"px",bottom:"0px","margin-left":"0px"}:{top:"-"+(parseInt(o)+t+2*i+a+s)+"px",left:"-"+i+"px",bottom:"0px","margin-left":"0px"}):1==c?currChildTile.css({top:"-"+i+"px",left:"-"+i+"px",bottom:"0px",right:"0px","margin-left":"0px"}):c==l?(currChildTile.css("auto"==o?{left:"-"+(h+t+3*i)+"px",right:"0px",top:"-"+i+"px","margin-left":"0px"}:{left:"-"+(h+t+3*i)+"px",right:"0px",top:"-"+i+"px","margin-left":"0px"}),c=0,d++):currChildTile.css({top:"-"+i+"px",left:"-"+i+"px",bottom:"0px","margin-left":"0px"}),r++,c++}}),$j(".gridgallery").width(e),"auto"==o?($j(".gridgallery .ulHolder .ourHolder").height((h+t+a+s)*rowCount+2*i+2*t+2*i),$j(".gridgallery .ulHolder").height((h+t+2*i+a+s)*rowCount+2*t+2*i),$j(".gridgallery .portfolioHolder").css({"margin-left":"-"+t+"px"})):($j(".gridgallery .ulHolder .ourHolder").height((parseInt(o)+t+a+s)*rowCount+2*i+2*t+2*i),$j(".gridgallery .ulHolder").height((parseInt(o)+t+2*i+a+s)*rowCount+2*t+2*i),$j(".gridgallery .portfolioHolder").css({"margin-left":"-"+t+"px"})),$j(".gridgallery #portfolio-loader").fadeOut("fast"),$j(".gridgallery #filterOptions").css({visibility:"visible"}),$j(".gridgallery .port-cat").css({visibility:"visible"}),$j(".gridgallery .ulHolder").css({visibility:"visible"})}function refreshGridGallery(){var e=$j(".gridgallery").parent().width(),t=5,i=10,l=2,r=0,a=1,s=1,n=0,o=0,h=0;$j(".gridgallery").hasClass("five")?t=5:$j(".gridgallery").hasClass("four")?t=4:$j(".gridgallery").hasClass("three")&&(t=3);var c=$j("#gridgallery-setting-height").html(),d=parseInt((e-t*i)/t);$j(".gridgallery .ulHolder .ourHolder .item").each(function(){n++}),rowCount=Math.ceil(n/t),$j(".gridgallery .ulHolder .ourHolder .item").each(function(){$j(this).children().size()>1&&(o=parseInt($j(this).children(".tile-desc").css("height")),h=10);var e=$j(this).children(".tile"),n=e.children().children("a");1==s?1==a?n.css({top:"-"+l+"px",left:"-"+l+"px",bottom:"0px",right:"0px","margin-left":"0px"}):a==t?(n.css("auto"==c?{left:"-"+(d+i+2*l)+"px",right:"0px",top:"-"+l+"px","margin-left":"0px"}:{left:"-"+(d+i+l)+"px",right:"0px",top:"-"+l+"px","margin-left":"0px"}),a=0,s++):n.css("auto"==c?{top:"-"+l+"px",left:"-"+l+"px",bottom:"0px","margin-left":"0px"}:{top:"-"+l+"px",left:"-"+l+"px",bottom:"0px","margin-left":"0px"}):s==rowCount?1==a?n.css("auto"==c?{top:"-"+(d+i+l+o+h)+"px",left:"-"+l+"px",bottom:"0px",bottom:"0px",right:"0px","margin-left":"0px"}:{top:"-"+(parseInt(c)+i+2*l+o+h)+"px",left:"-"+l+"px",bottom:"0px",bottom:"0px",right:"0px","margin-left":"0px"}):a==t?(n.css("auto"==c?{top:"-"+(d+i+l+o+h)+"px",bottom:"0px",left:"-"+(d+i+l)+"px",bottom:"0px",right:"0px","margin-left":"0px"}:{top:"-"+(parseInt(c)+i+2*l+o+h)+"px",bottom:"0px",left:"-"+(d+i+l)+"px",bottom:"0px",right:"0px","margin-left":"0px"}),a=0,s++):n.css("auto"==c?{top:"-"+(d+i+l+o+h)+"px",left:"-"+l+"px",bottom:"0px","margin-left":"0px"}:{top:"-"+(parseInt(c)+i+2*l+o+h)+"px",left:"-"+l+"px",bottom:"0px","margin-left":"0px"}):1==a?n.css({top:"-"+l+"px",left:"-"+l+"px",bottom:"0px",right:"0px","margin-left":"0px"}):a==t?(n.css("auto"==c?{left:"-"+(d+i+l)+"px",right:"0px",top:"-"+l+"px","margin-left":"0px"}:{left:"-"+(d+i+l)+"px",right:"0px",top:"-"+l+"px","margin-left":"0px"}),a=0,s++):n.css({top:"-"+l+"px",left:"-"+l+"px",bottom:"0px","margin-left":"0px"}),r++,a++})}function initTile(){"none"==$j("#header-container").css("display")&&$j("#header-container").remove(),$j(".tile").each(function(){$j(this).removeClass("endLine corner goRight")}),counter=0,$j(".portfolio").hasClass("five")&&(counter=5),$j(".portfolio").hasClass("four")&&(counter=4),$j(".portfolio").hasClass("three")&&(counter=3),sizeOfRows=Math.ceil($j(".tile").size()/counter),cou=0,$j(".tile").each(function(){cou++,cou==counter&&($j(this).addClass("goRight"),cou=0)}),fullRow=sizeOfRows-1;var e;for(e=0;e<=$j(".tile").size();e++)e>=counter*fullRow&&0!=fullRow&&$j(".tile").eq(e).addClass("endLine"),e==$j(".tile").size()-1&&e!=counter*fullRow&&$j(".tile").eq(e).addClass("corner").removeClass("goRight"),e==$j(".tile").size()-1&&0==fullRow&&$j(".tile").eq(e).addClass("goRight").removeClass("corner");1==$j(".tile").size()&&$j(".tile").removeClass("corner").removeClass("goRight").removeClass("endLine")}function showTile(){var e=10,t=2,i=0,l=0;$j(".item").children(".tile-desc")&&(i=parseInt($j(".item").children(".tile-desc").css("height")),l=10),$j("span").click(function(){$j(".tile").unbind("mouseleave");var e=$j(this).attr("class");$j(".portfolio .tile").each(function(){$j(this).children().children(".bbox").css("opacity","0"),$j(this).hasClass(e)||$j(this).children().children(".bbox").animate({opacity:"+=0.6"})})}),tileWidth=2*$j(".tile").width()+e+2*t,tileHeight=2*$j(".tile").height()+e+2*t+2*i+l,tileMarginLeft=parseInt($j(".goRight").children().children(".tileImage").css("marginLeft")),$j(".tile").children().children(".tileImage").css("width",tileWidth).css("height",tileHeight),$j(".tile").click(function(){try{window.getSelection().removeAllRanges()}catch(e){}$j(".tile").css("opacity","1"),$j(this).removeClass("noOut"),$j(this).hasClass("noOut")?($j(".tile").children().children(".tileImage").children(".about").fadeOut("fast"),$j(".tile").children().children(".tileImage").fadeOut("fast"),$j(".tile").css("opacity","1")):$j(this).hasClass("goRight")?($j(this).addClass("noOut"),$j(this).addClass("notOpacity"),$j(".tile").each(function(){$j(this).hasClass("notOpacity")?$j(this).removeClass("notOpacity"):$j(this).css("opacity","0.5")}),$j(this).children().children(".tileImage").fadeIn("normal").css("zIndex","110")):$j(this).hasClass("endLine")?($j(this).addClass("noOut"),$j(this).addClass("notOpacity"),$j(".tile").each(function(){$j(this).hasClass("notOpacity")?$j(this).removeClass("notOpacity"):$j(this).css("opacity","0.5")}),$j(this).children().children(".tileImage").fadeIn("normal").css("zIndex","110")):$j(this).hasClass("noOut")||($j(this).addClass("noOut"),$j(this).addClass("notOpacity"),$j(".tile").each(function(){$j(this).hasClass("notOpacity")?$j(this).removeClass("notOpacity"):$j(this).css("opacity","0.5")}),$j(this).children().children(".tileImage").fadeIn("normal").css("zIndex","110")),$j(".tile").bind("mouseleave",function(){$j(".tile").css("opacity","1"),$j(this).hasClass("goRight")?($j(this).children().children(".tileImage").css("zIndex","100").fadeOut("fast"),$j(this).removeClass("noOut")):$j(this).hasClass("endLine")?($j(this).children().children(".tileImage").css("zIndex","100").fadeOut("fast"),$j(this).removeClass("noOut")):$j(this).hasClass("noOut")&&($j(this).children().children(".tileImage").css("zIndex","100").fadeOut("fast"),$j(this).removeClass("noOut")),$j(".tile").css("opacity","1")})})}function quicksand(){var e=($j("#filterOptions li.active a").attr("class"),$j("ul.ourHolder")),t=e.clone();$j("#filterOptions li a").click(function(){$j("#filterOptions li").removeClass("active");var i=$j(this).attr("class");if($j(this).parent().addClass("active"),"all"==i)var l=t.find("li");else var l=t.find("li[class~="+i+"]");return e.quicksand(l,{duration:800,easing:"jswing"},function(){refreshGridGallery(),initTile(),tileHover(),$j(".portfolio").hasClass("item-direct")?directLink():$j(".portfolio").hasClass("item-fancybox")?itemFancybox():showTile(),"undefined"!=typeof Cufon&&Cufon.refresh()}),!1})}function categorySlider(){strong=parseInt($j(".strong").css("width")),$j(".strong").css("width",strong+"px"),$j(".category-list a").click(function(e){e.preventDefault(),$j(".gallery-portfolio").hide();var t=$j(this).attr("id");$j("."+t).show()});ulWidth=0,$j(".galery-holder").each(function(){liW=$j(this).children(".galery-wrap").children(".galery-slider").children("li").width()+parseInt($j(".galery-slider li").css("marginRight")),ulWidth=$j(this).children(".galery-wrap").children(".galery-slider").children("li").size()*liW,maxL=0,$j(this).children(".galery-wrap").children(".galery-slider").children("li").size()<=5?(maxL=$j(this).children(".galery-wrap").children(".galery-slider").children("li").size(),max=$j(this).children(".galery-wrap").children(".galery-slider").children("li").size(),$j(this).attr("data-enable",maxL),$j(this).attr("data-max",max)):(maxL=$j(this).children(".galery-wrap").children(".galery-slider").children("li").size()-5,max=$j(this).children(".galery-wrap").children(".galery-slider").children("li").size()-5,$j(this).attr("data-enable",maxL),$j(this).attr("data-max",max)),mL=maxL,$j(this).attr("data-ulWidth",ulWidth),$j(this).children("ul").css("width",ulWidth)}),$j(".gall-r").click(function(){return $j(this).parent(".name").siblings(".galery-holder").attr("data-enable")!=parseInt($j(this).parent(".name").siblings(".galery-holder").attr("data-max")-($j(this).parent(".name").siblings(".galery-holder").attr("data-max")-3))&&($j(this).parent(".name").siblings(".galery-holder").children(".galery-wrap").children(".galery-slider").stop("true","true"),$j(this).parent(".name").siblings(".galery-holder").children(".galery-wrap").children(".galery-slider").animate({left:"-="+liW+"px"}),mL=$j(this).parent(".name").siblings(".galery-holder").attr("data-enable")-1,$j(this).parent(".name").siblings(".galery-holder").attr("data-enable",mL)),!1}),$j(".gall-l").click(function(){return $j(this).parent(".name").siblings(".galery-holder").attr("data-enable")!=$j(this).parent(".name").siblings(".galery-holder").attr("data-max")&&($j(this).parent(".name").siblings(".galery-holder").children(".galery-wrap").children(".galery-slider").stop("true","true"),$j(this).parent(".name").siblings(".galery-holder").children(".galery-wrap").children(".galery-slider").animate({left:"+="+liW+"px"}),mL=$j(this).parent(".name").siblings(".galery-holder").attr("data-enable"),mL++,$j(this).parent(".name").siblings(".galery-holder").attr("data-enable",mL)),!1})}function directLink(){$j(".tile").parent().click(function(){window.location=$j(this).children().children().children("a").attr("href")})}function itemFancybox(){$j(".portfolio .ourHolder li").each(function(){var e="image",t="";if($j(this).hasClass("itemType-image"))e="image",t=$j(this).children(".tile").children().children("a").attr("href"),$j(this).children(".tile").fancybox({type:e,href:t,transitionIn:"elastic",transitionOut:"elastic",speedIn:600,speedOut:200,overlayShow:!0,autoDimensions:!1,width:$j(".gridgallery").parent().width(),height:parseInt($j(".gridgallery").parent().width()/1.5)});else if($j(this).hasClass("itemType-video")){if(e="swf",t=$j(this).children(".tile").children().children("a").attr("href"),-1!=t.indexOf("youtube"))t=t.replace(new RegExp("watch\\?v=","i"),"v/");else{e="iframe";var i=/http:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,l=t.match(i);t="http://player.vimeo.com/video/"+l[2]+"?title=0&byline=0&portrait=0&color=ffffff"}$j(this).children(".tile").fancybox({type:e,href:t,transitionIn:"elastic",transitionOut:"elastic",speedIn:600,speedOut:200,overlayShow:!0,autoDimensions:!1,width:$j(".gridgallery").parent().width(),height:parseInt($j(".gridgallery").parent().width()/1.5)})}else e="iframe",t=$j(this).children(".tile").children().children("a").attr("href"),$j(this).children(".tile").click(function(){window.open(t)})})}function portCatShow(){$j(".portfolio .port-cat.icon").click(function(){$j(".portfolio .port-cat.categories").fadeToggle("slow")})}function tileHover(){$j(".gridgallery .ourHolder .item").each(function(){var e=$j(this).children(".tile").children(".gridgallery-icon");$j(this).hover(function(){e.css({"background-color":"rgba(51, 51, 51, 0.8)"}),e.stop(!0,!0).fadeIn("slow")},function(){e.stop(!0,!0).fadeOut("slow"),e.css({"background-color":"none"})})})}
