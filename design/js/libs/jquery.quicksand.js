!function(t){t.fn.quicksand=function(e,i){var s={duration:750,easing:"swing",attribute:"data-id",adjustHeight:"auto",useScaling:!0,enhancement:function(){},selector:"> *",dx:0,dy:0};t.extend(s,i),(t.browser.msie||"undefined"==typeof t.fn.scale)&&(s.useScaling=!1);var a;if("function"==typeof arguments[1])var a=arguments[1];else var a=arguments[2];return this.each(function(i){var o,n,r=[],l=t(e).clone(),f=t(this),p=t(this).css("height"),h=!1,c=t(f).offset(),u=[],g=t(this).find(s.selector);if(t.browser.msie&&t.browser.version.substr(0,1)<7)return void f.html("").append(l);var y=0,m=function(){y||(y=1,$toDelete=f.find("> *"),f.prepend(F.find("> *")),$toDelete.remove(),h&&f.css("height",n),s.enhancement(f),"function"==typeof a&&a.call(this))},b=f.offsetParent(),v=b.offset();"relative"==b.css("position")?"body"==b.get(0).nodeName.toLowerCase()||(v.top+=parseFloat(b.css("border-top-width"))||0,v.left+=parseFloat(b.css("border-left-width"))||0):(v.top-=parseFloat(b.css("border-top-width"))||0,v.left-=parseFloat(b.css("border-left-width"))||0,v.top-=parseFloat(b.css("margin-top"))||0,v.left-=parseFloat(b.css("margin-left"))||0),isNaN(v.left)&&(v.left=0),isNaN(v.top)&&(v.top=0),v.left-=s.dx,v.top-=s.dy,f.css("height",t(this).height()),g.each(function(e){u[e]=t(this).offset()}),t(this).stop();var x=0,w=0;g.each(function(e){t(this).stop();var i=t(this).get(0);"absolute"==i.style.position?(x=-s.dx,w=-s.dy):(x=s.dx,w=s.dy),i.style.position="absolute",i.style.margin="0",i.style.top=u[e].top-parseFloat(i.style.marginTop)-v.top+w+"px",i.style.left=u[e].left-parseFloat(i.style.marginLeft)-v.left+x+"px"});var F=t(f).clone(),S=F.get(0);for(S.innerHTML="",S.setAttribute("id",""),S.style.height="auto",S.style.width=f.width()+"px",F.append(l),F.insertBefore(f),F.css("opacity",0),S.style.zIndex=-1,S.style.margin="0",S.style.position="absolute",S.style.top=c.top-v.top+"px",S.style.left=c.left-v.left+"px","dynamic"===s.adjustHeight?f.animate({height:F.height()},s.duration,s.easing):"auto"===s.adjustHeight&&(n=F.height(),parseFloat(p)<parseFloat(n)?f.css("height",n):h=!0),g.each(function(){var e=[];"function"==typeof s.attribute?(o=s.attribute(t(this)),l.each(function(){return s.attribute(this)==o?(e=t(this),!1):void 0})):e=l.filter("["+s.attribute+"="+t(this).attr(s.attribute)+"]"),r.push(e.length?s.useScaling?{element:t(this),animation:{top:e.offset().top-v.top,left:e.offset().left-v.left,opacity:1,scale:"1.0"}}:{element:t(this),animation:{top:e.offset().top-v.top,left:e.offset().left-v.left,opacity:1}}:s.useScaling?{element:t(this),animation:{opacity:"0.0",scale:"0.0"}}:{element:t(this),animation:{opacity:"0.0"}})}),l.each(function(){var e=[],i=[];"function"==typeof s.attribute?(o=s.attribute(t(this)),g.each(function(){return s.attribute(this)==o?(e=t(this),!1):void 0}),l.each(function(){return s.attribute(this)==o?(i=t(this),!1):void 0})):(e=g.filter("["+s.attribute+"="+t(this).attr(s.attribute)+"]"),i=l.filter("["+s.attribute+"="+t(this).attr(s.attribute)+"]"));var a;if(0===e.length){a=s.useScaling?{opacity:"1.0",scale:"1.0"}:{opacity:"1.0"},d=i.clone();var n=d.get(0);n.style.position="absolute",n.style.margin="0",n.style.top=i.offset().top-v.top+"px",n.style.left=i.offset().left-v.left+"px",d.css("opacity",0),s.useScaling&&d.css("transform","scale(0.0)"),d.appendTo(f),r.push({element:t(d),animation:a})}}),F.remove(),s.enhancement(f),i=0;i<r.length;i++)r[i].element.animate(r[i].animation,s.duration,s.easing,m)})}}(jQuery);
